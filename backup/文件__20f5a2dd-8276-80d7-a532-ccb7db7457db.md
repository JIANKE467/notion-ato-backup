
FILE*是c语言的又一种数据类型


（文件指针型）（常见的有整形，浮点型…）


<u>**注意⚠️：由于文件的类型是“文件指针型”所以使用文件句柄时无需带***</u>


<u>**注意⚠️：虽然文件文件以指针定义，但文件的指针叫句柄，文件内的位置叫文件指针**</u>


## 文件的声明（c语言中所有东西都是先声明后使用）


c语言用指针指向文件以声明文件：（定义一个文件指针类型的指针）


```c
FILE *p;//类型名*指针名
```


其中FILE*是数据类型，p是指向文件的指针名


## 文件的操作1


**将文件的操作函数赋值给相应指针，**即可实现文件的操作


以下是文件的操作函数


![1000016228.jpg](https://prod-files-secure.s3.us-west-2.amazonaws.com/51145155-d0f0-4bb1-85cf-344e4c2400e0/89fd09ac-45ea-4b1b-9548-2ea4637159df/1000016228.jpg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466UYUW6IUO%2F20260121%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260121T041813Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEPT%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIA223awCVFlhtdJqwzo4L8Sry9NfwLHK7twckf%2FCXXHsAiEAyRAFtFTKGXlH%2FTH03wStDdVnrCfGHqKVdPdA%2ByQYq78qiAQIvP%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FARAAGgw2Mzc0MjMxODM4MDUiDK%2FqozHovO0OpGvKpCrcA5GlP0KnIe%2FtTpk5UZTAXQboeMakscadmXzO3QNwAvQgReF%2BQdGDoJUuAP%2Bvyrviilf8G%2FRWTxfVWAHgiLtLB4vFP8oLWXoDAFJtHKG6yN3wm3I5EQ8VEx0TFL3oOQL92oJYYHYPuS43OuS8s51Ji2Ii7hNaumm7IRHUAUnBAYGZw%2B24a7mKB0n5Wkw6WtYa%2BaqP3py%2Fs%2Fyfl3r3a%2FRbA2hqpZNHECz7CGtZt8dTeYK4NBQ5O6xm35VDVI%2B5PF%2FNvpfkr37zeX%2B8oBWZq3%2Ba2Dp2mdwweNKcIi0EhqO83YQYOKSKNDkApRQzQ8mxyEbB%2FaYHCR%2F4Vo6Sr9rVJTLUyDClHgq3CDSqaaUyesHDAumfUXgEAwmHhubYO2w1aE6H7OcrBV7yTBzng%2BqRTHR%2F2PAiYZsiKbWVcgiajaonv0M16g6JHYl%2B%2BaP57MaLpUpApnhOuuU%2BF%2BNx6T8nBsZiXwNVmfXLO8hU7WZrXZp9BVw5PtXXd6dWripJk9qaSWcztjvl4ZB3rp8VDV0Dw10oy5AE7ChsW7nbjuvPpxqGxch7jQ5fVouYyWRrfz%2FoohF3zFWbJZwQQXDdYQijDIDtAUMkgDkuI7VT%2FRbD07gsUBbrEkH%2FZvvCAHNxxrG0MIyQwcsGOqUB6SJY3%2F2CoopS6bn1T3zXxNWXTEBbJC064xeb8CsjAshXx%2B0Y2x%2FhloShcJCK6VplHJ%2BW6QEkt21RlNHhJDsBZPYCwo2xrmScAgp%2BWm0aABRBPE6NDbjCJdBpRWxUB%2Fj%2BWkM%2FHJb22rWvJzB6FCcYwVg%2BhK%2FT6LdD%2F5vlTD8QFU0N8zxqudoMaOpFWZOpHonKlNgYmdRYtVUtu56W1p%2FL%2BsR%2FNNyT&X-Amz-Signature=b16992dc0384d665dd0673ca37c6849815215769b820247398867470244574a9&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)


例


```c
*p=fopen();
```


## 文件的操作2


以下说明了文件的操作函数的参数如何书写


### fopen 打开


```c
fopen("文件名","模式");
```


打开文件可写为


```c
FILE*fp=fopen("文件名","模式");
```


其中常用模式有:


r（读取）


w（写入）


a（追加）


这些只能操作文本文件


操作二进制文件需要在后面加b：


rb（读取）（如果文件不存在，返回NULL,存在，则返回相应文件的标识符）


wb（写入）（如果文件不存在，就创建,如果文件存在就清空文件中所有内容）


ab（追加）（如果文件不存在，就创建，如果文存在将文件指针偏移到最末尾）


ps：fopen返回的标识符就是指针


### fwrite 写入


```c
fwrite (写入内容,写入大小,写入次数,文件句柄);
```


其中：写入内容可以是指针，也可以是字符串（要带双引号）


文件位置是待写入文件句柄


### fclose 关闭


```c
fclose (文件句柄);
```


成功返回0


### fflush 清空文件写入缓冲区


当写入数据至文件时，数据不会被立刻写入，而是会等

1. 缓冲区满
2. 文件关闭
3. 进程结束

再写入，


使用fflush可手动写入当前缓冲区的内容至文件


格式：


```c
fflush(相应文件的句柄)
```


### fseek 文件指针偏移


```c
fseek(文件句柄,偏移量,偏移位置);
```


其中，

1. 偏移量为正往右偏移，为负往左偏
2. 偏移位置只有三个：SEEK_END(末尾），SEEK_SET(起始），SEEK_CUR(当前位置）

### ftell 计算文件指针偏移量


从文件起始开始计算当前文件指针偏移字节数


```c
ftell(文件句柄);
```


注意⚠️：函数参数中包含文件句柄的不需要将函数赋值给文件句柄，不包含则需要赋值给文件句柄（换言之只有fopen需要赋值给句柄）

