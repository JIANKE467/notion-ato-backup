
ps：中断只表示从用户态到内核态的过程


，不表示从内核态到用户态的过程


### 内中断与外中断


内中断：CPU内部的中断信号


外中断：CPU外部的中断信号


### 内中断例子（异常，例外）

1. 当前指令非法（越权执行，参数错误）会触发内中断
2. 执行陷入指令，将控制权换给内核（系统调用就是这么实现的）

ps：陷入指令不是特权指令


### 外中断例子（正常中断）

1. 时钟中断（外边时钟电路每隔一段时间就给CPU发送一个中断信号）
2. IO中断请求（如打印机打印完成后会发送一个中断信号，内核会进行相应处理）

![中断的分类](https://prod-files-secure.s3.us-west-2.amazonaws.com/51145155-d0f0-4bb1-85cf-344e4c2400e0/2baf5733-8455-4813-9016-7cf3c1db5ea2/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4667L6JOFI5%2F20260115%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260115T041506Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEGQaCXVzLXdlc3QtMiJHMEUCIQCSA8d3Yr4OU%2Bomd0sWP4S4FMWYvgMUab6vla7U6T2r3gIgPzciWZIWI2qcUwzRZk0LV8xVTAiNN18zoXyBpQThfmsq%2FwMILRAAGgw2Mzc0MjMxODM4MDUiDJacMAKRcQT7A7EeOSrcA%2BAHijuJAUC5qLntk0EVrOwE0ZWYX651Z4dlloICRiHCGGgW0mpKCHZcgGZq1R%2FCHibkX9OxZ8qiGsoUdQ8xvWV31PKGZxjRH8x%2FHk4mH2V36POLA7hT%2Buus0hzRVZde7X8S1uhxd%2BYLW5aOzWWdgCc13jBIIlduOxy0q%2Fm%2FggtkE2kvQxjFVnSpd0Jw91wOG4NexotfU%2Fdv0zpHAqzooZYKFpM9A7fmrsZmf8jhZMLvOo0G5ee9rTE%2BpJ1D4vCWaUXVzVENy3dgEq96boeyjOkqSMR%2F9rjvjYkrQb3FUfs5cPnuWg6yq1%2BGhinyQvVhCHgIay%2Bky0jV3G68jU7drGJ0ns7vjLwQgxRrK2Ru7vzLjgqiUcN92Wr9VueRsb0KXU4N7bHsTZ29LQmDA39y8k1eXP%2FQ%2BYV7SAylN6Oo1u5CPXMZKtJ47aKI%2BwhKsZGqin%2Bc1moZDzeSbNs3vnDiRmlEIOR%2BOL5Cu7br2T2bnHM4e1B5fuBn9mKI927oEZimKFLOhiqz6%2BqDA%2B23cwNujaoqeZoiQTBtftS4RyIMTs%2FU2GQ8Yr1C5z46X%2BIflzuUQJ6OizwbJm4em0B55msjvLotvsJzNx6NrqKeVNR%2FBe%2BgfWHFz5vW4Qtv2ZpfMOXHocsGOqUBaxR5SQUOVo1ohWFmMVWgIRpnu9pWNhNt%2BVD3iseULdKjm%2B%2BTj%2FKPcj6mNX2yv92EEhKeO3WbhDtE%2BmoeUk7j3CDJV4tARLkJqhNOxYAZ%2FCpzgwwQYMwlTCe1UOk5S%2Bz2zecT6GfhXrCQRjd3ycj5V%2FSa82N0ZaR771BdB6%2Bba7ckwT140joJe9jXcUGDVdSdzpqQ%2B03XoMmZTnwVk91TcBmVuE0k&X-Amz-Signature=c642055fbc05272dc50f49e4ee2b68943f285ddbca56366dcbac3797f73e317c&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)


### 中断机制的基本原理（中断后内核如何处理）


![中断原理](https://prod-files-secure.s3.us-west-2.amazonaws.com/51145155-d0f0-4bb1-85cf-344e4c2400e0/cd49423f-b49c-4154-8e17-7c59b9c467cf/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4667L6JOFI5%2F20260115%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260115T041506Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEGQaCXVzLXdlc3QtMiJHMEUCIQCSA8d3Yr4OU%2Bomd0sWP4S4FMWYvgMUab6vla7U6T2r3gIgPzciWZIWI2qcUwzRZk0LV8xVTAiNN18zoXyBpQThfmsq%2FwMILRAAGgw2Mzc0MjMxODM4MDUiDJacMAKRcQT7A7EeOSrcA%2BAHijuJAUC5qLntk0EVrOwE0ZWYX651Z4dlloICRiHCGGgW0mpKCHZcgGZq1R%2FCHibkX9OxZ8qiGsoUdQ8xvWV31PKGZxjRH8x%2FHk4mH2V36POLA7hT%2Buus0hzRVZde7X8S1uhxd%2BYLW5aOzWWdgCc13jBIIlduOxy0q%2Fm%2FggtkE2kvQxjFVnSpd0Jw91wOG4NexotfU%2Fdv0zpHAqzooZYKFpM9A7fmrsZmf8jhZMLvOo0G5ee9rTE%2BpJ1D4vCWaUXVzVENy3dgEq96boeyjOkqSMR%2F9rjvjYkrQb3FUfs5cPnuWg6yq1%2BGhinyQvVhCHgIay%2Bky0jV3G68jU7drGJ0ns7vjLwQgxRrK2Ru7vzLjgqiUcN92Wr9VueRsb0KXU4N7bHsTZ29LQmDA39y8k1eXP%2FQ%2BYV7SAylN6Oo1u5CPXMZKtJ47aKI%2BwhKsZGqin%2Bc1moZDzeSbNs3vnDiRmlEIOR%2BOL5Cu7br2T2bnHM4e1B5fuBn9mKI927oEZimKFLOhiqz6%2BqDA%2B23cwNujaoqeZoiQTBtftS4RyIMTs%2FU2GQ8Yr1C5z46X%2BIflzuUQJ6OizwbJm4em0B55msjvLotvsJzNx6NrqKeVNR%2FBe%2BgfWHFz5vW4Qtv2ZpfMOXHocsGOqUBaxR5SQUOVo1ohWFmMVWgIRpnu9pWNhNt%2BVD3iseULdKjm%2B%2BTj%2FKPcj6mNX2yv92EEhKeO3WbhDtE%2BmoeUk7j3CDJV4tARLkJqhNOxYAZ%2FCpzgwwQYMwlTCe1UOk5S%2Bz2zecT6GfhXrCQRjd3ycj5V%2FSa82N0ZaR771BdB6%2Bba7ckwT140joJe9jXcUGDVdSdzpqQ%2B03XoMmZTnwVk91TcBmVuE0k&X-Amz-Signature=561471fda2a7b13ebda22a4992ec9529c821adb6e305ca1443979faa4e181b15&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)


### 总结


![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/51145155-d0f0-4bb1-85cf-344e4c2400e0/d6328e79-9073-479e-89f2-96a958b74c96/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4667L6JOFI5%2F20260115%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260115T041506Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEGQaCXVzLXdlc3QtMiJHMEUCIQCSA8d3Yr4OU%2Bomd0sWP4S4FMWYvgMUab6vla7U6T2r3gIgPzciWZIWI2qcUwzRZk0LV8xVTAiNN18zoXyBpQThfmsq%2FwMILRAAGgw2Mzc0MjMxODM4MDUiDJacMAKRcQT7A7EeOSrcA%2BAHijuJAUC5qLntk0EVrOwE0ZWYX651Z4dlloICRiHCGGgW0mpKCHZcgGZq1R%2FCHibkX9OxZ8qiGsoUdQ8xvWV31PKGZxjRH8x%2FHk4mH2V36POLA7hT%2Buus0hzRVZde7X8S1uhxd%2BYLW5aOzWWdgCc13jBIIlduOxy0q%2Fm%2FggtkE2kvQxjFVnSpd0Jw91wOG4NexotfU%2Fdv0zpHAqzooZYKFpM9A7fmrsZmf8jhZMLvOo0G5ee9rTE%2BpJ1D4vCWaUXVzVENy3dgEq96boeyjOkqSMR%2F9rjvjYkrQb3FUfs5cPnuWg6yq1%2BGhinyQvVhCHgIay%2Bky0jV3G68jU7drGJ0ns7vjLwQgxRrK2Ru7vzLjgqiUcN92Wr9VueRsb0KXU4N7bHsTZ29LQmDA39y8k1eXP%2FQ%2BYV7SAylN6Oo1u5CPXMZKtJ47aKI%2BwhKsZGqin%2Bc1moZDzeSbNs3vnDiRmlEIOR%2BOL5Cu7br2T2bnHM4e1B5fuBn9mKI927oEZimKFLOhiqz6%2BqDA%2B23cwNujaoqeZoiQTBtftS4RyIMTs%2FU2GQ8Yr1C5z46X%2BIflzuUQJ6OizwbJm4em0B55msjvLotvsJzNx6NrqKeVNR%2FBe%2BgfWHFz5vW4Qtv2ZpfMOXHocsGOqUBaxR5SQUOVo1ohWFmMVWgIRpnu9pWNhNt%2BVD3iseULdKjm%2B%2BTj%2FKPcj6mNX2yv92EEhKeO3WbhDtE%2BmoeUk7j3CDJV4tARLkJqhNOxYAZ%2FCpzgwwQYMwlTCe1UOk5S%2Bz2zecT6GfhXrCQRjd3ycj5V%2FSa82N0ZaR771BdB6%2Bba7ckwT140joJe9jXcUGDVdSdzpqQ%2B03XoMmZTnwVk91TcBmVuE0k&X-Amz-Signature=4332fe32717639113d43eac1b5d066a77573102028c34044bdb6b33fc5be947f&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

